---
- name:    span1
  pdata: |
	<p>
	  <span id="foo">FOO</span>
	  <span id="mark:bar">BAR</span>
	  <span title="id: baz">BAZ</span>
	  <span id="mark:poo" class="foo">POO</span>
	</p>
	<p>
	  <span title="attr: 'class' classname">ATTR</span>
	  <span title="append: ' checked'">APPEND</span>
	  <span title="append: ' checked'" class="foo">APPEND</span>
	</p>
	<p>
	  <span title="value: expr">EXPR</span>
	  <span title="value: expr" class="foo">EXPR</span>
	</p>
	<p>
	  <span title="if x > 0">positive</span>
	  <span title="elsif x < 0">negative</span>
	  <span title="else">zero</span>
	</p>

  plogic: |

  expected: |
	[ "<p>\n"]
	[ "  <span id=\"foo\">"]
	[ "FOO"]
	[ "</span>\n"]
	[ ]
	[ "BAR"]
	[ ]
	[ ]
	[ "BAZ"]
	[ ]
	[ "  <span class=\"foo\">"]
	[ "POO"]
	[ "</span>\n"]
	[ "</p>\n"]
	[ "<p>\n"]
	[ "  <span class=\"", <%=classname%>, "\">"]
	[ "ATTR"]
	[ "</span>\n"]
	[ "  <span", <%=' checked'%>, ">"]
	[ "APPEND"]
	[ "</span>\n"]
	[ "  <span class=\"foo\"", <%=' checked'%>, ">"]
	[ "APPEND"]
	[ "</span>\n"]
	[ "</p>\n"]
	[ "<p>\n"]
	[ <%=expr%>]
	[ "  <span class=\"foo\">", <%=expr%>, "</span>\n"]
	[ "</p>\n"]
	[ "<p>\n"]
	"if x > 0 then"[ ]
	[ "positive"]
	[ ]
	"elsif x < 0 then"[ ]
	[ "negative"]
	[ ]
	"else"[ ]
	[ "zero"]
	[ ]
	"end"[ "</p>\n"]

  output: |

---
- name:    span2
  pdata: |
        <p>
	  <span id="mark:section1">title</span>
	  <span id="mark:section2">title</span>
	  <span id="mark:section3">title</span>
        </p>

  plogic: |
	#section1 {
	  value: title1;
	}
	#section2 {
	  value: title2;
	  attrs: "class" name;
	}
	#section3 {
	  value: title3;
	  append: ' checked="checked"';
	}

  expected: |
	[ "<p>\n"]
	[ ]
	[ <%=title1%>]
	[ ]
	[ "  <span class=\"", <%=name%>, "\">"]
	[ <%=title2%>]
	[ "</span>\n"]
	[ "  <span", <%=' checked="checked"'%>, ">"]
	[ <%=title3%>]
	[ "</span>\n"]
	[ "</p>\n"]
 

  output: |