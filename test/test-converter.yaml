###
- name:    delspan1
  desc:    <span> and id="mark:foo"
  properties:  { delspan : true }
  pdata*:
    eruby: |
	<p>
	  <span id="foo">FOO</span>
	  <span id="mark:bar">BAR</span>
	  <span kw:d="id: baz">BAZ</span>
	  <span kw:d="mark:poo" class="foo">POO</span>
	</p>

    php: &delspan1_pdata |
	<p>
	  <span id="foo">FOO</span>
	  <span id="mark:bar">BAR</span>
	  <span kw:d="id(baz)">BAZ</span>
	  <span kw:d="mark(poo)" class="foo">POO</span>
	</p>

    jstl: *delspan1_pdata
    
    eperl: *delspan1_pdata

  expected*:
    eruby: &delspan2_expected |
	print("<p>\n")
	print("  <span id=\"foo\">")
	print("FOO")
	print("</span>\n")
	print()
	print("BAR")
	print()
	print()
	print("BAZ")
	print()
	print("  <span class=\"foo\">")
	print("POO")
	print("</span>\n")
	print("</p>\n")

    php: *delspan2_expected

    jstl: *delspan2_expected

    eperl: *delspan2_expected

###
- name:    delspan2
  desc:    <span> and 'attr:' or 'append:'
  properties:  { delspan : true }
  pdata*:
    eruby: |
	<p>
	  <span kw:d="attr: 'class' classname">ATTR</span>
	  <span kw:d="append: ' checked'">APPEND</span>
	  <span kw:d="append: ' checked'" class="foo">APPEND</span>
	</p>

    php: &delspan2_pdata |
	<p>
	  <span kw:d="attr('class', $classname)">ATTR</span>
	  <span kw:d="append(' checked')">APPEND</span>
	  <span kw:d="append(' checked')" class="foo">APPEND</span>
	</p>

    jstl: |
	<p>
	  <span kw:d="attr('class', classname)">ATTR</span>
	  <span kw:d="append(' checked')">APPEND</span>
	  <span kw:d="append(' checked')" class="foo">APPEND</span>
	</p>

    eperl: |
	<p>
	  <span kw:d="attr('class', $classname)">ATTR</span>
	  <span kw:d="append(' checked')">APPEND</span>
	  <span kw:d="append(' checked')" class="foo">APPEND</span>
	</p>

  expected*:
    eruby: |
	print("<p>\n")
	print("  <span class=\"", <%=classname%>, "\">")
	print("ATTR")
	print("</span>\n")
	print("  <span", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("  <span class=\"foo\"", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("</p>\n")

    php: |
	print("<p>\n")
	print("  <span class=\"", <%=$classname%>, "\">")
	print("ATTR")
	print("</span>\n")
	print("  <span", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("  <span class=\"foo\"", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("</p>\n")

    jstl: |
	print("<p>\n")
	print("  <span class=\"", <%=classname%>, "\">")
	print("ATTR")
	print("</span>\n")
	print("  <span", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("  <span class=\"foo\"", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("</p>\n")

    eperl: |
	print("<p>\n")
	print("  <span class=\"", <%=$classname%>, "\">")
	print("ATTR")
	print("</span>\n")
	print("  <span", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("  <span class=\"foo\"", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("</p>\n")

###
- name:    delspan3
  desc:    <span> and 'value:'
  properties:  { delspan : true }
  pdata*:
    eruby: |
	<p>
	  <span kw:d="value: expr">EXPR</span>
	  <span kw:d="value: expr" class="foo">EXPR</span>
	</p>

    php: |
	<p>
	  <span kw:d="value($expr)">EXPR</span>
	  <span kw:d="value($expr)" class="foo">EXPR</span>
	</p>

    jstl: |
	<p>
	  <span kw:d="value(expr)">EXPR</span>
	  <span kw:d="value(expr)" class="foo">EXPR</span>
	</p>

    eperl: |
	<p>
	  <span kw:d="value($expr)">EXPR</span>
	  <span kw:d="value($expr)" class="foo">EXPR</span>
	</p>

  expected*:
    eruby: |
	print("<p>\n")
	print(<%=expr%>)
	print("  <span class=\"foo\">", <%=expr%>, "</span>\n")
	print("</p>\n")

    php: |
	print("<p>\n")
	print(<%=$expr%>)
	print("  <span class=\"foo\">", <%=$expr%>, "</span>\n")
	print("</p>\n")

    jstl: |
	print("<p>\n")
	print(<%=expr%>)
	print("  <span class=\"foo\">", <%=expr%>, "</span>\n")
	print("</p>\n")

    eperl: |
	print("<p>\n")
	print(<%=$expr%>)
	print("  <span class=\"foo\">", <%=$expr%>, "</span>\n")
	print("</p>\n")

###
- name:    delspan4
  desc:    <span> and 'if:', 'elsif:', 'else:'
  properties:  { delspan : true }
  pdata*:
    eruby: |
	<p>
	  <span kw:d="if x > 0">positive</span>
	  <span kw:d="elsif x < 0">negative</span>
	  <span kw:d="else">zero</span>
	</p>

    php: |
	<p>
	  <span kw:d="if($x > 0)">positive</span>
	  <span kw:d="elseif($x < 0)">negative</span>
	  <span kw:d="else">zero</span>
	</p>

    jstl: |
	<p>
	  <span kw:d="if(x > 0)">positive</span>
	  <span kw:d="elseif(x < 0)">negative</span>
	  <span kw:d="else">zero</span>
	</p>

    eperl: |
	<p>
	  <span kw:d="if($x > 0)">positive</span>
	  <span kw:d="elsif($x < 0)">negative</span>
	  <span kw:d="else">zero</span>
	</p>

  plogic: |
  expected*:
    eruby: |
	print("<p>\n")
	<%if x > 0 then%>
	print()
	print("positive")
	print()
	<%elsif x < 0 then%>
	print()
	print("negative")
	print()
	<%else%>
	print()
	print("zero")
	print()
	<%end%>
	print("</p>\n")

    php: |
	print("<p>\n")
	<%if ($x > 0) {%>
	print()
	print("positive")
	print()
	<%} elseif ($x < 0) {%>
	print()
	print("negative")
	print()
	<%} else {%>
	print()
	print("zero")
	print()
	<%}%>
	print("</p>\n")

    jstl: |
	print("<p>\n")
	<%<c:choose><c:when test="${x > 0}">%>
	print()
	print("positive")
	print()
	<%</c:when><c:when test="${x < 0}">%>
	print()
	print("negative")
	print()
	<%</c:when><c:otherwise>%>
	print()
	print("zero")
	print()
	<%</c:otherwise></c:choose>%>
	print("</p>\n")

    eperl: |
	print("<p>\n")
	<%if ($x > 0) {%>
	print()
	print("positive")
	print()
	<%} elsif ($x < 0) {%>
	print()
	print("negative")
	print()
	<%} else {%>
	print()
	print("zero")
	print()
	<%}%>
	print("</p>\n")


###
#- name:    span2
#  pdata: |
#        <p>
#	  <span id="mark:section1">title</span>
#	  <span id="mark:section2">title</span>
#	  <span id="mark:section3">title</span>
#        </p>
#
#  plogic: |
#	#section1 {
#	  value: title1;
#	}
#	#section2 {
#	  value: title2;
#	  attrs: "class" name;
#	}
#	#section3 {
#	  value: title3;
#	  append: ' checked="checked"';
#	}
#
#  expected: |
#	print("<p>\n")
#	print()
#	print(<%=title1%>)
#	print()
#	print("  <span class=\"", <%=name%>, "\">")
#	print(<%=title2%>)
#	print("</span>\n")
#	print("  <span", <%=' checked="checked"'%>, ">")
#	print(<%=title3%>)
#	print("</span>\n")
#	print("</p>\n")
# 
#
#  output: |
#


###
- name:    unmatched
  desc:    unmatched text to fetch pattern
  bug:     self found
  pdata*:
    eruby: &unmatched_pdata |
	foo
	bar
	baz
    php: *unmatched_pdata
    jstl: *unmatched_pdata
    eperl: *unmatched_pdata

  plogic*:
    eruby: |
    php: |
    jstl: |
    eperl: |

  expected*:
    eruby: &unmatched_expected |
        print("foo\nbar\nbaz\n")
    php:  *unmatched_expected
    jstl: *unmatched_expected
    eperl: *unmatched_expected

