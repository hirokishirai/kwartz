---
- name:    span1
  pdata: |
	<p>
	  <span id="foo">FOO</span>
	  <span id="mark:bar">BAR</span>
	  <span title="id: baz">BAZ</span>
	  <span id="mark:poo" class="foo">POO</span>
	</p>
	<p>
	  <span title="attr: 'class' classname">ATTR</span>
	  <span title="append: ' checked'">APPEND</span>
	  <span title="append: ' checked'" class="foo">APPEND</span>
	</p>
	<p>
	  <span title="value: expr">EXPR</span>
	  <span title="value: expr" class="foo">EXPR</span>
	</p>
	<p>
	  <span title="if x > 0">positive</span>
	  <span title="elsif x < 0">negative</span>
	  <span title="else">zero</span>
	</p>

  plogic: |

  expected: |
	print("<p>\n")
	print("  <span id=\"foo\">")
	print("FOO")
	print("</span>\n")
	print()
	print("BAR")
	print()
	print()
	print("BAZ")
	print()
	print("  <span class=\"foo\">")
	print("POO")
	print("</span>\n")
	print("</p>\n")
	print("<p>\n")
	print("  <span class=\"", <%=classname%>, "\">")
	print("ATTR")
	print("</span>\n")
	print("  <span", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("  <span class=\"foo\"", <%=' checked'%>, ">")
	print("APPEND")
	print("</span>\n")
	print("</p>\n")
	print("<p>\n")
	print(<%=expr%>)
	print("  <span class=\"foo\">", <%=expr%>, "</span>\n")
	print("</p>\n")
	print("<p>\n")
	<%if x > 0 then%>
	print()
	print("positive")
	print()
	<%elsif x < 0 then%>
	print()
	print("negative")
	print()
	<%else%>
	print()
	print("zero")
	print()
	<%end%>
	print("</p>\n")

  output: |

###
#- name:    span2
#  pdata: |
#        <p>
#	  <span id="mark:section1">title</span>
#	  <span id="mark:section2">title</span>
#	  <span id="mark:section3">title</span>
#        </p>
#
#  plogic: |
#	#section1 {
#	  value: title1;
#	}
#	#section2 {
#	  value: title2;
#	  attrs: "class" name;
#	}
#	#section3 {
#	  value: title3;
#	  append: ' checked="checked"';
#	}
#
#  expected: |
#	[ "<p>\n"]
#	[ ]
#	[ <%=title1%>]
#	[ ]
#	[ "  <span class=\"", <%=name%>, "\">"]
#	[ <%=title2%>]
#	[ "</span>\n"]
#	[ "  <span", <%=' checked="checked"'%>, ">"]
#	[ <%=title3%>]
#	[ "</span>\n"]
#	[ "</p>\n"]
# 
#
#  output: |
#


##
- name:    unmatched
  desc:    unmatched text to fetch pattern
  bug:     self found
  pdata: |
	foo
	bar
	baz
  plogic: |
  expected: |
        print("foo\nbar\nbaz\n")


