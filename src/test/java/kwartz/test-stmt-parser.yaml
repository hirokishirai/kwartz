### $Date$
### $Release$
### $Copyright$

###
- name:		print1
  input: |
	print(x);
  expected: |
	:PRINT
	  x

- name:		print2
  input: |
	print(x, y+20*x, a.b.c());
  expected: |
	:PRINT
	  x
	  +
	    y
	    *
	      20
	      x
	  .()
	    .
	      a
	      .b
	    .c()

- name:		print3
  input: |
	print(x);
	print(y); print(z);
  expected: |
	:PRINT
	  x
	:PRINT
	  y
	:PRINT
	  z

###
- name:		expr1
  input: |
  	x = x + 1;
  expected: |
	:EXPR
	  =
	    x
	    +
	      x
	      1

- name:		expr2
  input: |
	x = 1;
	x = x + 1;
	f(x);
  expected: |
	:EXPR
	  =
	    x
	    1
	:EXPR
	  =
	    x
	    +
	      x
	      1
	:EXPR
	  f()
	    x

###
- name:		while1
  input: |
	while (x > 0) { print(x); }
  expected: |
	:WHILE
	  >
	    x
	    0
	  :BLOCK
	    :PRINT
	      x

- name:		while2
  input: |
	i = 0;
	while (i < N) {
	  j = i;
	  while (j < M) {
	    arr[i][j] = i * j;
	    j += 1;
	  }
	  i += 1;
	}
  expected: |
	:EXPR
	  =
	    i
	    0
	:WHILE
	  <
	    i
	    N
	  :BLOCK
	    :EXPR
	      =
	        j
	        i
	    :WHILE
	      <
	        j
	        M
	      :BLOCK
	        :EXPR
		  =
		    []
		      []
		        arr
			i
		      j
		    *
		      i
		      j
		:EXPR
		  +=
		    j
		    1
	    :EXPR
	      +=
	        i
		1

###
- name:		foreach1
  input: |
	foreach (item = list) { print(item); }
  expected: |
	:FOREACH
	  item
	  list
	  :BLOCK
	    :PRINT
	      item

- name:		foreach2
  desc:		"'in' is used instead of '='"
  input: |
	foreach (item in list) { print(item); }
  expected: |
	:FOREACH
	  item
	  list
	  :BLOCK
	    :PRINT
	      item

- name:		foreach3
  input: |
	i = 0;
	foreach (item = obj.list()) {
	  i += 1;
	  color = i % 2 == 0 ? '#FCC' : '#CCF';
	  print("color=", color);
	}
  expected: |
	:EXPR
	  =
	    i
	    0
	:FOREACH
	  item
	  .()
	    obj
	    .list()
	  :BLOCK
	    :EXPR
	      +=
	        i
		1
	    :EXPR
	      =
	        color
	        ?:
		  ==
		    %
		      i
		      2
		    0
		  "#FCC"
		  "#CCF"
	    :PRINT
	      "color="
	      color

- name:		foreach4
  input:	foreach (item['key'] = list) { print(item['key']); }
  exception*:
    ruby:	Kwartz::SemanticError
    java:	kwartz.SemanticException
  errormsg*:
    ruby:	'1:14: []: invalid loop-variable of foreach statement.'
    java:	'1:14: []: invalid loop-variable of foreach statement.'


###
- name:		if1
  input: |
	if (x > 0) {
	  print(x);
	}
  expected: |
	:IF
	  >
	    x
	    0
	  :BLOCK
	    :PRINT
	      x

- name:		if2
  input: |
	if (x > 0) {
	  print('positive');
	}
	else {
	  print("not positive");
	}
  expected: |
	:IF
	  >
	    x
	    0
	  :BLOCK
	    :PRINT
	      "positive"
	  :BLOCK
	    :PRINT
	      "not positive"

- name:		if3
  input: |
	if (x > 0) {
	  print('positive');
	}
	elseif (x < 0) {
	  print("negative");
	}
  expected: |
	:IF
	  >
	    x
	    0
	  :BLOCK
	    :PRINT
	      "positive"
	  :IF
	    <
	      x
	      0
	    :BLOCK
	      :PRINT
	        "negative"

- name:		if4
  input: |
	if (x > 0) {
	  print('positive');
	}
	elseif (x < 0) {
	  print("negative");
	}
	elseif (y < 0) {
	  print("y is negative.");
	}
	else {
	  print("zero.");
	}
  expected: |
	:IF
	  >
	    x
	    0
	  :BLOCK
	    :PRINT
	      "positive"
	  :IF
	    <
	      x
	      0
	    :BLOCK
	      :PRINT
	        "negative"
	    :IF
	      <
	        y
		0
	      :BLOCK
	        :PRINT
		  "y is negative."
	      :BLOCK
	        :PRINT
		  "zero."

- name:		if5
  input: |
	if (x > y) {
	  if (x > z) {
	    print("max is x(=", x, ")\n");
	  } else {
	    print("max is z(=", z, ")\n");
	  }
	} else {
	  if (y > z) {
	    print("max is y(=", y, ")\n");
	  } else {
	    print("max is z(=", z, ")\n");
	  }
	}
  expected: |
	:IF
	  >
	    x
	    y
	  :BLOCK
	    :IF
	      >
	        x
		z
	      :BLOCK
	        :PRINT
		  "max is x(="
		  x
		  ")\n"
	      :BLOCK
	        :PRINT
		  "max is z(="
		  z
		  ")\n"
	  :BLOCK
	    :IF
	      >
	        y
		z
	      :BLOCK
	        :PRINT
		  "max is y(="
		  y
		  ")\n"
	      :BLOCK
	        :PRINT
		  "max is z(="
		  z
		  ")\n"

###
- name:		break1
  input: |
	break;
  expected: |
	:BREAK

- name:		break2
  input: |
	while (true) {
	  if (x < 0) {
	    break;
	  }
	}
  expected: |
	:WHILE
	  true
	  :BLOCK
	    :IF
	      <
	        x
		0
	      :BLOCK
	        :BREAK

- name:		continue1
  input: |
	continue;
  expected: |
	:CONTINUE

- name:		continue2
  input: |
	while (true) {
	  if (locked == true) {
	    sleep(10);
  	    continue;
	  }
	  break;
	}
  expected: |
	:WHILE
	  true
	  :BLOCK
	    :IF
	      ==
	        locked
		true
	      :BLOCK
	        :EXPR
	          sleep()
		    10
		:CONTINUE
	    :BREAK

###
- name:		elem1
  input: |
	_stag;
	_cont;
	_etag;
	_elem;
	_element(foo);
	_content(bar);
  expected: |
	_stag
	_cont
	_etag
	_elem
	_element(foo)
	_content(bar)

- name:		elem2
  input: |
	if (cond) {
	   _stag;
	   foreach (item = list) {
	     _cont;
	   }
	   _etag;
	} elseif (cond) {
	   foreach (item in list) {
	     _elem;
	   }
	} else {
	  _element(foo);
	}
  expected: |
	:IF
	  cond
	  :BLOCK
	    _stag
	    :FOREACH
	      item
	      list
	      :BLOCK
	        _cont
	    _etag
	  :IF
	    cond
	    :BLOCK
	      :FOREACH
	        item
		list
	        :BLOCK
		  _elem
	    :BLOCK
	      _element(foo)


### ----------------------------------------

###
- name:		syntaxerr_print1
  input: |
	print x;
  exception:	kwartz.SyntaxException
  errormsg:	"1:7: '(' expected."


- name:		syntaxerr_print2
  input: |
  	print(foo);
	print(bar(x,y);
	print(baz);
  exception:	kwartz.SyntaxException
  errormsg:	"2:15: ')' expected."


- name:		syntaxerr_print3
  input: |
  	print(foo);
	print(bar(x,y))
	print(baz);
  exception:	kwartz.SyntaxException
  errormsg:	"2:16: ';' expected."


- name:		syntaxerr_print4
  input: |
  	print(foo);
	print(x,y,z,);
	print(baz);
  exception:	kwartz.SyntaxException
  errormsg:	"2:13: expression syntax error."


###
- name:		syntaxerr_exprstmt1
  input: |
	x = y;
	y +=;
  exception:	kwartz.SyntaxException
  #errormsg:	"2:5: expression syntax error."
  errormsg:	"2:5: syntax error"
 
  
- name:		syntaxerr_exprstmt2
  input: |
	x = y;
	x = y
	print(x);
  exception:	kwartz.SyntaxException
  errormsg:	"2:6: ';' expected."


- name:		syntaxerr_exprstmt3
  input: |
	x = y;
	x = y
	x = 1;
  exception:	kwartz.SyntaxException
  errormsg:	"2:6: ';' expected."
 

- name:		syntaxerr_exprstmt4
  input: |
	x = y + 6(x);
  exception:	kwartz.SyntaxException
  errormsg:	"1:10: ';' expected."
 

###
- name:		syntaxerr_foreach1
  input: |
	i = 0;
	foreach item in list {
	  i += 1;
	  print(item);
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:9: '(' expected."


- name:		syntaxerr_foreach2
  input: |
	i = 0;
	foreach (item in list {
	  i += 1;
	  print(item);
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:23: ')' expected."
 
 
- name:		syntaxerr_foreach3
  input: |
	i = 0;
	foreach (item in list)) {
	  i += 1;
	  print(item);
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:23: '{' expected."
 
 
- name:		syntaxerr_foreach4
  input: |
	i = 0;
	foreach (item in list) {
	  i += 1;
	  print(item);
	
  exception:	kwartz.SyntaxException
  errormsg:	"2:24: '{' is not closed."
 
 
- name:		syntaxerr_foreach5
  input: |
	i = 0;
	foreach (item as list) {
	  i += 1;
	  print(item);
	}	
  exception:	kwartz.SyntaxException
  errormsg:	"2:15: 'in' or '=' expected."
 
 
###
- name:		syntaxerr_if1
  input: |
	if x > 0 {
	  print("positive.");
	}
  exception:	kwartz.SyntaxException
  errormsg:	"1:4: '(' expected."


- name:		syntaxerr_if2
  input: |
	if (x > f(0) {
	  print("positive.");
	}
  exception:	kwartz.SyntaxException
  errormsg:	"1:14: ')' expected."


- name:		syntaxerr_if3
  input: |
	if (x > f(0))
	  print("positive.");

  exception:	kwartz.SyntaxException
  errormsg:	"2:3: '{' expected."


- name:		syntaxerr_if4
  input: |
	if (x > f(0)) {
	  print("positive.");
	
  exception:	kwartz.SyntaxException
  errormsg:	"1:15: '{' is not closed."


###
- name:		syntaxerr_elseif1
  input: |
	if (x > 0) {
	  print("positive.");
	} elseif x < 0 { 
	  print("negative.");
	}
  exception:	kwartz.SyntaxException
  errormsg:	"3:10: '(' expected."


- name:		syntaxerr_elseif2
  input: |
	if (x > 0) {
	  print("positive.");
	} elseif (x < 0 {
	  print("negative.");
	}
  exception:	kwartz.SyntaxException
  errormsg:	"3:17: ')' expected."


- name:		syntaxerr_elseif3
  input: |
	if (x > 0) {
	  print("positive.");
	} elseif (x < 0)
	  print("negative.");
  exception:	kwartz.SyntaxException
  errormsg:	"4:3: '{' expected."


- name:		syntaxerr_elseif4
  input: |
	if (x > 0) {
	  print("positive.");
	} elseif (x < 0) {
	  print("negative.");
  exception:	kwartz.SyntaxException
  errormsg:	"3:18: '{' is not closed."


###
- name:		syntaxerr_else1
  input: |
	if (x > 0) {
	  print("positive.");
	} elseif (x < 0) {
	  print("negative.");
	} else
	  print("zero.");
  exception:	kwartz.SyntaxException
  errormsg:	"6:3: '{' expected."
  

- name:		syntaxerr_else2
  input: |
	if (x > 0) {
	  print("positive.");
	} elseif (x < 0) {
	  print("negative.");
	} else {
	  print("zero.");
  exception:	kwartz.SyntaxException
  errormsg:	"5:8: '{' is not closed."


###
- name:		syntaxerr_while1
  input: |
	i = 0;
	while i < n {
	  print(i, "\n");
	  i += 1;
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:7: '(' expected."


- name:		syntaxerr_while2
  input: |
	i = 0;
	while (i < n {
	  print(i, "\n");
	  i += 1;
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:14: ')' expected."


- name:		syntaxerr_while3
  input: |
	i = 0;
	while (i < n) 
	  print(i, "\n");
	  i += 1;
	}
  exception:	kwartz.SyntaxException
  errormsg:	"3:3: '{' expected."


- name:		syntaxerr_while4
  input: |
	i = 0;
	while (i < n) {
	  print(i, "\n");
	  i += 1;
	
  exception:	kwartz.SyntaxException
  errormsg:	"2:15: '{' is not closed."


- name:		syntaxerr_while5
  input: |
	i = 0;
	while (i+ < n) {
	  print(i, "\n");
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:11: expression syntax error."


###
- name:		syntaxerr_break1
  input: |
	i = 0;
	while (true) {
	  if (i >= n) {
	    break
	  }
	  i += 1;
	}
  exception:	kwartz.SyntaxException
  errormsg:	"4:10: ';' expected."


- name:		syntaxerr_continue1
  input: |
	i = 0;
	while (true) {
	  i += 1;
	  if (i < n) {
	    continue
	  }
	}
  exception:	kwartz.SyntaxException
  errormsg:	"5:13: ';' expected."


###
- name:		syntaxerr_stag1
  input: |
	foreach (item in list) {
	  _stag
	  _cont;
	  _etag;
	  _elem;
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:8: ';' expected."


- name:		syntaxerr_etag1
  input: |
	foreach (item in list) {
	  _stag;
	  _cont;
	  _etag
	  _elem;
	}
  exception:	kwartz.SyntaxException
  errormsg:	"4:8: ';' expected."


- name:		syntaxerr_cont1
  input: |
	foreach (item in list) {
	  _stag;
	  _cont
	  _etag;
	  _elem;
	}
  exception:	kwartz.SyntaxException
  errormsg:	"3:8: ';' expected."


- name:		syntaxerr_elem1
  input: |
	foreach (item in list) {
	  _stag;
	  _cont;
	  _etag;
	  _elem
	}
  exception:	kwartz.SyntaxException
  errormsg:	"5:8: ';' expected."


###
- name:		syntaxerr_element1
  input: |
	foreach (item in list) {
	  _element(foo)
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:16: ';' expected."


- name:		syntaxerr_element2
  input: |
	foreach (item in list) {
	  _element("foo");
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:12: element name expected."


- name:		syntaxerr_content1
  input: |
	foreach (item in list) {
	  _content(foo)
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:16: ';' expected."


- name:		syntaxerr_content2
  input: |
	foreach (item in list) {
	  _content("foo");
	}
  exception:	kwartz.SyntaxException
  errormsg:	"2:12: element name expected."

