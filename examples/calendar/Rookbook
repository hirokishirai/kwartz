
classpath = ".#{File::PATH_SEPARATOR}../../src/java"
compiler = "jikes -cp #{classpath}"

all = ["result.html", "build.xml"]

recipe  :all			, all

files = %w[calendar-month.html calendar-month.plogic calendar-page.html calendar-page.plogic]

recipe  "result.html"	, "CalendarExample.class", files		do |r|
	cmd "java -cp #{classpath} CalendarExample > #{r.product}"
	end

grecipe  "*.class"	, "{1}.java"					do |r|
	cmd "#{compiler} {1}.java"
	end

recipe  "build.xml"	, "build.kwaff"					do |r|
	cmd "kwaff #{r.ingred} > #{r.product}"
	end

recipe	:clear								do |r|
	list = Dir.glob("*.class")
	list.concat all
	remove_rf list unless list.empty?
	end

recipe  :default		, :all

